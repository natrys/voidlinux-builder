# Template file for 'weechat-discord'
pkgname=weechat-discord
version=0.1
revision=8
_commit=2a676a40bc5487fe2c77da2b5dddcf91197298d9
wrksrc=${pkgname}-${_commit}
build_style=cargo
build_helper=rust
hostmakedepends="llvm clang"
makedepends="weechat-devel"
short_desc="Weechat plugin for Discord written in Rust"
maintainer="Imran Khan <imrankhan@teknik.io>"
license="MIT"
homepage="https://github.com/terminal-discord/weechat-discord"
distfiles="https://github.com/terminal-discord/weechat-discord/archive/${_commit}.tar.gz"
checksum=84a6128d1e3e12d8ac43b6a1960e40f5edb6f9fac5b2eb0f3a754c1b3c21cd5a

do_install() {
  vlicense LICENSE
  vmkdir usr/lib/weechat/plugins/
  vcopy target/${RUST_TARGET}/release/libweecord.so usr/lib/weechat/plugins/
}
